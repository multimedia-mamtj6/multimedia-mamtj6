<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Display (Responsive Zoom)</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #FFFFFF; /* White background */
            display: flex;
            justify-content: center;
            align-items: center; /* Center content when smaller than the viewport */
            overflow: auto; /* Allows scrollbars when needed (e.g., on desktop) */
        }
        canvas {
            display: block;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
</head>
<body>
    <canvas id="pdf-canvas"></canvas>

    <script>
        // --- DEVELOPER TWEAK ---
        // This zoom level will be used for desktop views.
        const desktopZoom = 2.0; // e.g., 2.0 for 200%
        
        // This is the width (in pixels) where the view switches to mobile.
        const mobileBreakpoint = 768; 
        // -------------------------

        const url = 'https://multimedia.mamtj6.com/kuliah/jadual-kuliah.pdf';
        const pageToDisplay = 1;

        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js`;

        const canvas = document.getElementById('pdf-canvas');
        const context = canvas.getContext('2d');
        let pdfPage = null; // Variable to hold the loaded page object

        function renderPage() {
            if (!pdfPage) return; // Don't render if the page hasn't loaded yet

            const viewport = pdfPage.getViewport({ scale: 1 });
            let scale;

            // --- RESPONSIVE LOGIC ---
            // Check if the current window width is less than the breakpoint.
            if (window.innerWidth < mobileBreakpoint) {
                // MOBILE VIEW: Calculate scale to fit the whole page.
                const scaleX = window.innerWidth / viewport.width;
                const scaleY = window.innerHeight / viewport.height;
                scale = Math.min(scaleX, scaleY);
            } else {
                // DESKTOP VIEW: Use the specified desktop zoom level.
                scale = desktopZoom;
            }
            // -------------------------

            const scaledViewport = pdfPage.getViewport({ scale: scale });
            const devicePixelRatio = window.devicePixelRatio || 1;

            canvas.width = Math.floor(scaledViewport.width * devicePixelRatio);
            canvas.height = Math.floor(scaledViewport.height * devicePixelRatio);
            canvas.style.width = Math.floor(scaledViewport.width) + 'px';
            canvas.style.height = Math.floor(scaledViewport.height) + 'px';

            context.scale(devicePixelRatio, devicePixelRatio);

            const renderContext = {
                canvasContext: context,
                viewport: scaledViewport
            };
            pdfPage.render(renderContext);
        }

        pdfjsLib.getDocument(url).promise.then(function(pdfDoc) {
            pdfDoc.getPage(pageToDisplay).then(function(page) {
                pdfPage = page; // Store the page object
                renderPage(); // Initial render
            });
        }).catch(function (reason) {
            console.error('Error: ' + reason);
        });

        // Re-render the page whenever the window is resized to ensure it's always correct
        window.addEventListener('resize', renderPage);
    </script>
</body>
</html>
